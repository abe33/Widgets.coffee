<!DOCTYPE html>  <html> <head>   <title>jquery.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="Cakefile.html">                 Cakefile.coffee               </a>                                           <a class="source" href="Nemfile.html">                 Nemfile.coffee               </a>                                           <a class="source" href="builder.html">                 builder.coffee               </a>                                           <a class="source" href="button.html">                 button.coffee               </a>                                           <a class="source" href="calendar.html">                 calendar.coffee               </a>                                           <a class="source" href="checkbox.html">                 checkbox.coffee               </a>                                           <a class="source" href="colorpicker.html">                 colorpicker.coffee               </a>                                           <a class="source" href="container.html">                 container.coffee               </a>                                           <a class="source" href="dates.html">                 dates.coffee               </a>                                           <a class="source" href="filepicker.html">                 filepicker.coffee               </a>                                           <a class="source" href="jquery.html">                 jquery.coffee               </a>                                           <a class="source" href="keys.html">                 keys.coffee               </a>                                           <a class="source" href="menus.html">                 menus.coffee               </a>                                           <a class="source" href="mixins.html">                 mixins.coffee               </a>                                           <a class="source" href="module.html">                 module.coffee               </a>                                           <a class="source" href="nem.html">                 nem.coffee               </a>                                           <a class="source" href="numeric-widget.html">                 numeric-widget.coffee               </a>                                           <a class="source" href="radio.html">                 radio.coffee               </a>                                           <a class="source" href="radiogroup.html">                 radiogroup.coffee               </a>                                           <a class="source" href="selects.html">                 selects.coffee               </a>                                           <a class="source" href="signals.html">                 signals.coffee               </a>                                           <a class="source" href="slider.html">                 slider.coffee               </a>                                           <a class="source" href="std.html">                 std.coffee               </a>                                           <a class="source" href="stepper.html">                 stepper.coffee               </a>                                           <a class="source" href="textarea.html">                 textarea.coffee               </a>                                           <a class="source" href="textinput.html">                 textinput.coffee               </a>                                           <a class="source" href="widgets.html">                 widgets.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><link rel='stylesheet' href='../css/styles.css' media='screen'>
<link rel='stylesheet' href='../css/widgets.css' media='screen'></p>

<script type='text/javascript' src='../depends/jquery-1.6.1.min.js'></script>

<script type='text/javascript' src='../depends/jquery.mousewheel.js'></script>

<script type='text/javascript' src='../lib/widgets.js'></script>

<script type='text/javascript' src='../lib/builder.js'></script>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The jQuery <code>widgets</code> function performs a replacement
of the inputs, selects and textareas in the current
query set.</p>

<p>The replacement mecanic itself is handled by an instance
of the <code>WidgetPlugin</code> class.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">widgets</span><span class="o">:-&gt;</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">process</span> <span class="nx">$</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>WidgetPlugin</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The <code>WidgetPlugin</code> class provides controls over the replacement
of HTML elements by Widgets.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nb">WidgetPlugin</span>
  <span class="py">constructor</span><span class="o">:-&gt;</span>
    <span class="py">@processors</span> <span class="o">=</span> <span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h3>Processors Management</h3>

<p>The <code>WidgetPlugin</code> class deals with replacement through
processor functions.</p>

<p>A processor function handle the creation of the widget
corresponding to one or more HTML elements types.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>A processor function is registered through the <code>register</code>
method.
The register method takes the following arguments :</p>

<ul>
<li><code>id</code>: A string that will identify the processor
in the plugin instance.</li>
<li><code>match</code>: Either a string or a function.
If a string is passed it will be used to match the node name.
If a function is passed, the node itself will be passed to the
function, the function return <code>true</code> if the node match the requirement
for the processor.</li>
<li><code>processor</code>: A function that takes a node as argument and that
should return a widget instance for the passed-in node.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">register</span><span class="o">:</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">processor</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="k">unless</span> <span class="nx">processor</span><span class="o">?</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s">&quot;The processor function can&#39;t be null in register&quot;</span>

    <span class="py">@processors</span><span class="p">[</span><span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">processor</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Use the <code>registerWidgetFor</code> method to register a Widget class
with a match. The registered processor is a simple function that
instanciate a widget with the target as argument.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">registerWidgetFor</span><span class="o">:</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">widget</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="k">unless</span> <span class="nx">widget</span><span class="o">?</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s">&quot;The widget class can&#39;t be null</span>
<span class="s">               in registerWidgetFor&quot;</span>

    <span class="py">@register</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="p">(</span><span class="nx">target</span><span class="p">)</span><span class="o">-&gt;</span>
      <span class="k">new</span> <span class="nx">widget</span> <span class="nx">target</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Returns <code>true</code> if a processor is registered for the passed-in <code>id</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">isRegistered</span><span class="o">:</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="nx">id</span> <span class="k">of</span> <span class="py">@processors</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <h3>Replacement Process</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>The <code>process</code> method receive a query set and loop through the
elements.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">process</span><span class="o">:</span><span class="p">(</span><span class="nx">queryset</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="nv">widgets </span><span class="o">=</span> <span class="p">[]</span>
    <span class="nx">queryset</span><span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">o</span><span class="p">)</span><span class="o">=&gt;</span>
      <span class="nv">target </span><span class="o">=</span> <span class="nx">$</span> <span class="nx">o</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>HTML elements that have already been processed once
are flagged with the <code>widget-done</code> class.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span> <span class="k">if</span> <span class="nx">target</span><span class="p">.</span><span class="nx">hasClass</span> <span class="s">&quot;widget-done&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>A reference to the next sibling and the parent
of the node are retreived for a later use.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">next   </span><span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
      <span class="nv">parent </span><span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parent</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>For a given element, each processor are tested
against the element.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">for</span> <span class="nx">id</span><span class="p">,</span> <span class="p">[</span><span class="nx">match</span><span class="p">,</span> <span class="nx">processor</span><span class="p">]</span> <span class="k">of</span> <span class="py">@processors</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>The processor match is tested against the
node according to the match type.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">elementMatched </span><span class="o">=</span> <span class="k">if</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span> <span class="nx">match</span>
          <span class="nx">match</span><span class="p">.</span><span class="nx">call</span> <span class="k">this</span><span class="p">,</span> <span class="nx">o</span>
        <span class="k">else</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">is</span> <span class="nx">match</span>

        <span class="k">if</span> <span class="nx">elementMatched</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>When the processor match, it's called
with the plugin as context and the element
as argument</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nv">widget </span><span class="o">=</span> <span class="nx">processor</span><span class="p">.</span><span class="nx">call</span> <span class="k">this</span><span class="p">,</span> <span class="nx">o</span>
          <span class="nx">widgets</span><span class="p">.</span><span class="nx">push</span> <span class="nx">widget</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>The produced widget is then inserted in the DOM
after its target.</p>

<p>Since some widgets insert their target as their child
the next element is used to insert the widget in place.
If the element was at the end of its parent, the parent
is used instead.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="nx">widget</span><span class="o">?</span>
            <span class="k">if</span> <span class="nx">next</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
              <span class="nx">widget</span><span class="p">.</span><span class="nx">before</span> <span class="nx">next</span>
            <span class="k">else</span>
              <span class="nx">widget</span><span class="p">.</span><span class="nx">attach</span> <span class="nx">parent</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Once a processor matched, the loop is breaked.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">break</span>

    <span class="k">return</span> <span class="nx">widgets</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h3>Matching Utilities</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Returns <code>true</code> if the passed-in argument is a <code>HTMLElement</code> instance.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">isElement</span><span class="o">:</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="k">if</span> <span class="k">typeof</span> <span class="nb">HTMLElement</span> <span class="o">is</span> <span class="s">&quot;object&quot;</span>
      <span class="nx">o</span> <span class="k">instanceof</span> <span class="nb">HTMLElement</span>
    <span class="k">else</span>
      <span class="k">typeof</span> <span class="nx">o</span> <span class="o">is</span> <span class="s">&quot;object&quot;</span> <span class="o">and</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">is</span> <span class="mi">1</span> <span class="o">and</span>
      <span class="k">typeof</span> <span class="nx">o</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">is</span> <span class="s">&quot;string&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Returns <code>true</code> if the passed-in argument is a <code>HTMLElement</code>
with its <code>nodeName</code> equal to <code>tag</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">isTag</span><span class="o">:</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">tag</span><span class="p">)</span><span class="o">-&gt;</span>
    <span class="py">@isElement</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">and</span> <span class="nx">o</span><span class="o">?</span><span class="p">.</span><span class="nx">nodeName</span><span class="o">?</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">is</span> <span class="nx">tag</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Returns <code>true</code> if the passed-in argument is an <code>input</code> node
with a type attribute contains in <code>types</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">isInputWithType</span><span class="o">:</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">types</span><span class="p">...)</span><span class="o">-&gt;</span>
    <span class="py">@isTag</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s">&quot;input&quot;</span> <span class="p">)</span> <span class="o">and</span> <span class="nx">$</span><span class="p">(</span> <span class="nx">o</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)</span> <span class="k">in</span> <span class="nx">types</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Returns a function that will match an element with the
<code>isInputWithType</code> function.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">inputWithType</span><span class="o">:</span><span class="p">(</span><span class="nx">types</span><span class="p">...)</span><span class="o">-&gt;</span>
    <span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="o">-&gt;</span> <span class="py">@isInputWithType</span><span class="p">.</span><span class="nx">apply</span> <span class="k">this</span><span class="p">,</span> <span class="p">[</span><span class="nx">o</span><span class="p">].</span><span class="nx">concat</span> <span class="nx">types</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h3>Plugin Setup</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>An instance of the plugin class is available as a property of the <code>$</code>
object.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">$.widgetPlugin </span><span class="o">=</span> <span class="k">new</span> <span class="nb">WidgetPlugin</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Default processors for the plugin handles most of the HTML5 form elements.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;textarea&quot;</span><span class="p">,</span>
                                 <span class="s">&quot;textarea&quot;</span><span class="p">,</span>
                                  <span class="nb">TextArea</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;select&quot;</span><span class="p">,</span>
                                 <span class="s">&quot;select&quot;</span><span class="p">,</span>
                                 <span class="nb">SingleSelect</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;textinput&quot;</span><span class="p">,</span>
                                 <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span> <span class="s">&quot;text&quot;</span><span class="p">,</span>
                                                               <span class="s">&quot;password&quot;</span><span class="p">),</span>
                                 <span class="nb">TextInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;button&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span> <span class="s">&quot;button&quot;</span><span class="p">,</span>
                                                                <span class="s">&quot;reset&quot;</span><span class="p">,</span>
                                                                <span class="s">&quot;submit&quot;</span> <span class="p">),</span>
                                  <span class="nb">Button</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;range&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;range&quot;</span><span class="p">),</span>
                                  <span class="nb">Slider</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;number&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;number&quot;</span><span class="p">),</span>
                                  <span class="nb">Stepper</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;checkbox&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;checkbox&quot;</span><span class="p">),</span>
                                  <span class="nb">CheckBox</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;color&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">),</span>
                                  <span class="nb">ColorInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;file&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;file&quot;</span><span class="p">),</span>
                                  <span class="nb">FilePicker</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;time&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;time&quot;</span><span class="p">),</span>
                                  <span class="nb">TimeInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;date&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;date&quot;</span><span class="p">),</span>
                                  <span class="nb">DateInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;month&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">),</span>
                                  <span class="nb">MonthInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;week&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;week&quot;</span><span class="p">),</span>
                                  <span class="nb">WeekInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;datetime&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;datetime&quot;</span><span class="p">),</span>
                                  <span class="nb">DateTimeInput</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">registerWidgetFor</span> <span class="s">&quot;datetime-local&quot;</span><span class="p">,</span>
                                  <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span>
                                    <span class="s">&quot;datetime-local&quot;</span><span class="p">),</span>
                                  <span class="nb">DateTimeLocalInput</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>The radio input are a special case since each radio that have the same name
are part of a group.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">radioProcessor</span><span class="o">=</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="o">-&gt;</span>
  <span class="nv">widget </span><span class="o">=</span> <span class="k">new</span> <span class="nb">Radio</span> <span class="nx">o</span>
  <span class="nv">name </span><span class="o">=</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">get</span> <span class="s">&quot;name&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>For all radios that have a name, a <code>RadioGroup</code> stored with
the radios name is created and filled with the <code>Radio</code> widgets.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="nx">name</span><span class="o">?</span>
    <span class="py">@radiogroups</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">unless</span> <span class="py">@radiogroups</span><span class="o">?</span>
    <span class="py">@radiogroups</span><span class="p">[</span><span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RadioGroup</span> <span class="k">unless</span> <span class="py">@radiogroups</span><span class="p">[</span> <span class="nx">name</span><span class="p">]</span><span class="o">?</span>

    <span class="nv">group </span><span class="o">=</span> <span class="py">@radiogroups</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
    <span class="nx">group</span><span class="p">.</span><span class="nx">add</span> <span class="nx">widget</span>

  <span class="nx">widget</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">register</span> <span class="s">&quot;radio&quot;</span><span class="p">,</span>
                         <span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">inputWithType</span><span class="p">(</span><span class="s">&quot;radio&quot;</span><span class="p">),</span>
                         <span class="nx">radioProcessor</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Forms are another special case. When a <code>form</code> node is encountered,
the processor will create a new form object on the plugin. This object
will contains the widgets generated by a call to the <code>widgets</code> function
on the form components in this form.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">formProcessor</span><span class="o">=</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>The <code>forms</code> property is created lazily.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">@forms</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">unless</span> <span class="py">@forms</span><span class="o">?</span>

  <span class="nv">form </span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
  <span class="nv">resetButtons </span><span class="o">=</span> <span class="p">[]</span>
  <span class="nv">submitButtons </span><span class="o">=</span> <span class="p">[]</span>

  <span class="nv">widgets </span><span class="o">=</span> <span class="nx">form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;input, textarea, select&quot;</span><span class="p">).</span><span class="nx">widgets</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Reset is not handled by the browser. The click on a reset button prevent
the default behavior, instead, the buttons in a form will receive
a custom action that call the <code>reset</code> method on all the widgets
the forms, excepted the <code>Button</code> instances (they don't have a value
to reset).</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">reset</span><span class="o">=-&gt;</span>
    <span class="nx">widget</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span> <span class="k">for</span> <span class="nx">widget</span> <span class="k">in</span> <span class="nx">widgets</span> <span class="k">when</span> <span class="nx">widget</span> <span class="o">not</span> <span class="k">instanceof</span> <span class="nb">Button</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Looping through all the widgets to find the reset and submit buttons
and affect it to their respective array.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">for</span> <span class="nx">widget</span> <span class="k">in</span> <span class="nx">widgets</span>
    <span class="nx">submitButtons</span><span class="p">.</span><span class="nx">push</span> <span class="nx">widget</span> <span class="k">if</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">jTarget</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)</span> <span class="o">is</span> <span class="s">&quot;submit&quot;</span>

    <span class="k">if</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">jTarget</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)</span> <span class="o">is</span> <span class="s">&quot;reset&quot;</span>
      <span class="nx">resetButtons</span><span class="p">.</span><span class="nx">push</span> <span class="nx">widget</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Reset buttons receive a custom action, where display is the
value of the button and action is the local <code>reset</code> function
created previously.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">widget</span><span class="p">.</span><span class="nx">set</span> <span class="s">&quot;action&quot;</span><span class="p">,</span>
        <span class="py">display</span><span class="o">:</span><span class="nx">widget</span><span class="p">.</span><span class="nx">jTarget</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">),</span>
        <span class="py">action</span><span class="o">:</span><span class="nx">reset</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>The form object is then created and pushed into the forms collection
of the plugin.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="py">@forms</span><span class="p">.</span><span class="nx">push</span>
    <span class="py">method</span><span class="o">:</span><span class="nx">form</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&quot;method&quot;</span>
    <span class="py">action</span><span class="o">:</span><span class="nx">form</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&quot;action&quot;</span>
    <span class="py">widgets</span><span class="o">:</span><span class="nx">widgets</span>
    <span class="py">resetButtons</span><span class="o">:</span><span class="nx">resetButtons</span>
    <span class="py">submitButtons</span><span class="o">:</span><span class="nx">submitButtons</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>The form node doesn't have any widget associated with it
so the processor return <code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">return</span> <span class="kc">null</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widgetPlugin</span><span class="p">.</span><span class="nx">register</span> <span class="s">&quot;form&quot;</span><span class="p">,</span> <span class="s">&quot;form&quot;</span><span class="p">,</span> <span class="nx">formProcessor</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 