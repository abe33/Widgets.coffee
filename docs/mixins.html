<!DOCTYPE html>  <html> <head>   <title>mixins.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="builder.html">                 builder.coffee               </a>                                           <a class="source" href="button.html">                 button.coffee               </a>                                           <a class="source" href="calendar.html">                 calendar.coffee               </a>                                           <a class="source" href="checkbox.html">                 checkbox.coffee               </a>                                           <a class="source" href="colorpicker.html">                 colorpicker.coffee               </a>                                           <a class="source" href="container.html">                 container.coffee               </a>                                           <a class="source" href="dates.html">                 dates.coffee               </a>                                           <a class="source" href="filepicker.html">                 filepicker.coffee               </a>                                           <a class="source" href="jquery.html">                 jquery.coffee               </a>                                           <a class="source" href="keys.html">                 keys.coffee               </a>                                           <a class="source" href="menus.html">                 menus.coffee               </a>                                           <a class="source" href="mixins.html">                 mixins.coffee               </a>                                           <a class="source" href="module.html">                 module.coffee               </a>                                           <a class="source" href="numeric-widget.html">                 numeric-widget.coffee               </a>                                           <a class="source" href="radio.html">                 radio.coffee               </a>                                           <a class="source" href="radiogroup.html">                 radiogroup.coffee               </a>                                           <a class="source" href="selects.html">                 selects.coffee               </a>                                           <a class="source" href="slider.html">                 slider.coffee               </a>                                           <a class="source" href="stepper.html">                 stepper.coffee               </a>                                           <a class="source" href="textarea.html">                 textarea.coffee               </a>                                           <a class="source" href="textinput.html">                 textinput.coffee               </a>                                           <a class="source" href="widgets.html">                 widgets.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               mixins.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><link rel="stylesheet" href="../css/styles.css" media="screen"></p>

<p>The <code>mixins.coffe</code> file contains the set of mixins that are used
by widgets.</p>

<p>The file contains the following definitions:</p>

<ul>
<li><a href="ValueInRange">ValueInRange</a></li>
<li><a href="FocusProvidedByChild">FocusProvidedByChild</a></li>
<li><a href="HasChild">HasChild</a></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p><a name="ValueInRange"></a></p>

<h1>ValueInRange</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>ValueInRange provides a coherent behavior accross the widgets
which value can be constrained in a range through the <code>min</code>,
<code>max</code> and <code>step</code> attributes of their respective targets.</p>

<p>The <code>ValueInRange</code> mixin doesn't provides any setters for the
<code>min</code>, <code>max</code> and <code>step</code> properties. The class that receive the
mixin should define them to ensure bounds validity and value
collision.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">ValueInRange</span><span class="o">=</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The constructor hook initialize the shared properties and
creates the keyboard bindings for trigger increment and
decrement intervals.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">constructorHook</span><span class="o">:-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The <code>min</code> property represent the lower bound of the value's range.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@min</span> <span class="o">=</span> <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>The <code>max</code> property represent the upper bound of the value's range.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@max</span> <span class="o">=</span> <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>The <code>step</code> property represent the gap between legible values.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@step</span> <span class="o">=</span> <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h3>Keyboard controls</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Use the <code>Up</code> or <code>Left</code> arrows on the keyboard to increment
the value by the amount of the <code>step</code> property.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@registerKeyDownCommand</span> <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">up</span> <span class="p">),</span> <span class="py">@startIncrement</span>
        <span class="py">@registerKeyUpCommand</span>   <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">up</span> <span class="p">),</span> <span class="py">@endIncrement</span>

        <span class="py">@registerKeyDownCommand</span> <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">right</span> <span class="p">),</span> <span class="py">@startIncrement</span>
        <span class="py">@registerKeyUpCommand</span>   <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">right</span> <span class="p">),</span> <span class="py">@endIncrement</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Use the <code>Down</code> or <code>Right</code> arrows on the keyboard to decrement
the value by the amount of the <code>step</code> property.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@registerKeyDownCommand</span> <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">down</span> <span class="p">),</span> <span class="py">@startDecrement</span>
        <span class="py">@registerKeyUpCommand</span>   <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">down</span> <span class="p">),</span> <span class="py">@endDecrement</span>

        <span class="py">@registerKeyDownCommand</span> <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">left</span> <span class="p">),</span> <span class="py">@startDecrement</span>
        <span class="py">@registerKeyUpCommand</span>   <span class="nx">keystroke</span><span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">left</span> <span class="p">),</span> <span class="py">@endDecrement</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Ensure that the passed-in <code>value</code> match all the constraints
defined on the target of the current widget.</p>

<p>The returned value should be safely affected to the <code>value</code>
property.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">fitToRange</span><span class="o">:</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span> <span class="p">)</span><span class="o">-&gt;</span>
        <span class="k">if</span> <span class="nx">min</span><span class="o">?</span> <span class="o">and</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">min</span> <span class="k">then</span> <span class="nv">value </span><span class="o">=</span> <span class="nx">min</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">max</span><span class="o">?</span> <span class="o">and</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">max</span> <span class="k">then</span> <span class="nv">value </span><span class="o">=</span> <span class="nx">max</span>

        <span class="py">@snapToStep</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Override this method to implement the concrete snapping.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">snapToStep</span><span class="o">:</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span><span class="o">-&gt;</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h3>Intervals Management</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Stores the interval id. When not running, <code>intervalId</code>
is always <code>-1</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">intervalId</span><span class="o">:-</span><span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Increment the value of the amount of the <code>step</code> property.
Override the method in the class that receive the mixin.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">increment</span><span class="o">:-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Decrement the value of the amount of the <code>step</code> property.
Override the method in the class that receive the mixin.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">decrement</span><span class="o">:-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Initiate the increment interval if interaction are allowed
on the widget.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">startIncrement</span><span class="o">:-&gt;</span>
        <span class="k">unless</span> <span class="py">@cantInteract</span><span class="p">()</span>
            <span class="k">if</span> <span class="py">@intervalId</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span> <span class="k">then</span> <span class="py">@intervalId</span> <span class="o">=</span> <span class="nv">setInterval </span><span class="o">=&gt;</span>
                <span class="py">@increment</span><span class="p">()</span>
            <span class="p">,</span> <span class="mi">50</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p><code>startIncrement</code> returns <code>false</code> to prevent default behavior
when used as an event callback.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Initiate the decrement interval if interaction are allowed
on the widget.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">startDecrement</span><span class="o">:-&gt;</span>
        <span class="k">unless</span> <span class="py">@cantInteract</span><span class="p">()</span>
            <span class="k">if</span> <span class="py">@intervalId</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span> <span class="k">then</span> <span class="py">@intervalId</span> <span class="o">=</span> <span class="nv">setInterval </span><span class="o">=&gt;</span>
                <span class="py">@decrement</span><span class="p">()</span>
            <span class="p">,</span> <span class="mi">50</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p><code>startDecrement</code> returns <code>false</code> to prevent default behavior
when used as an event callback.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Ends the increment interval.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">endIncrement</span><span class="o">:-&gt;</span>
        <span class="nx">clearInterval</span> <span class="py">@intervalId</span>
        <span class="py">@intervalId</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Ends the decrement interval.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">endDecrement</span><span class="o">:-&gt;</span>
        <span class="nx">clearInterval</span> <span class="py">@intervalId</span>
        <span class="py">@intervalId</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h3>Events handlers</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Using the mouse wheel, the value is either incremented
or decremented according to the event's delta.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">mousewheel</span><span class="o">:</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaX</span><span class="p">,</span> <span class="nx">deltaY</span> <span class="p">)</span><span class="o">-&gt;</span>
        <span class="k">unless</span> <span class="py">@cantInteract</span><span class="p">()</span>
            <span class="k">if</span> <span class="nx">delta</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="py">@increment</span><span class="p">()</span> <span class="k">else</span> <span class="py">@decrement</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p><code>mousewheel</code> returns <code>false</code> to prevent the page to scroll.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p><a name="FocusProvidedByChild"></a></p>

<h1>FocusProvidedByChild</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Allow a widget to handle the focus trough one of its child.</p>

<p>For instance, A widget that should allow the user to input
a value with the keyboard will contains a <code>text</code> input.
In that case, the widget focus should be provided by the input
to have only one focusable element (not both the widget and its input)
and to allow to write in the input as soon as the widget get
the focus, whatever the means lead the widget to get the focus.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">FocusProvidedByChild</span><span class="o">=</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>The constructor hook will register focus related events
on the <code>focusProvider</code> child. The widget receiving the
mixin should ensure that the property is set before
the hook call.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">constructorHook</span><span class="o">:-&gt;</span>
        <span class="py">@focusProvider</span><span class="p">.</span><span class="nx">bind</span> <span class="py">@focusRelatedEvents</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">=&gt;</span>
            <span class="py">@</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">].</span><span class="nx">apply</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <h3>Focus management</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>There's no need for the dummy to be able to receive the focus. So
the dummy will never have the <code>tabindex</code> attribute set.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">setFocusable</span><span class="o">:-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Grabbing the focus for this widget is giving the focus to its child.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">grabFocus</span><span class="o">:-&gt;</span>
        <span class="py">@focusProvider</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <h3>Events handling</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Since focus related events will be provided by another object,
the events that the widget will receive from its dummy is reduced.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">supportedEvents</span><span class="o">:</span><span class="p">[</span>
        <span class="s">&quot;mousedown&quot;</span><span class="p">,</span> <span class="s">&quot;mouseup&quot;</span><span class="p">,</span>     <span class="s">&quot;mousemove&quot;</span><span class="p">,</span> <span class="s">&quot;mouseover&quot;</span><span class="p">,</span>
        <span class="s">&quot;mouseout&quot;</span><span class="p">,</span>  <span class="s">&quot;mousewheel&quot;</span><span class="p">,</span>  <span class="s">&quot;click&quot;</span><span class="p">,</span>     <span class="s">&quot;dblclick&quot;</span><span class="p">,</span>
    <span class="p">].</span><span class="nx">join</span> <span class="s">&quot; &quot;</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Since keyboard events can only be received from the element
that have the focus, the widget will listen the keyboard events
from the focus provider and not from the dummy.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">focusRelatedEvents</span><span class="o">:</span><span class="p">[</span>
       <span class="s">&quot;focus&quot;</span><span class="p">,</span>     <span class="s">&quot;blur&quot;</span><span class="p">,</span>         <span class="s">&quot;keyup&quot;</span><span class="p">,</span>     <span class="s">&quot;keydown&quot;</span><span class="p">,</span>
       <span class="s">&quot;keypress&quot;</span><span class="p">,</span>  <span class="s">&quot;input&quot;</span><span class="p">,</span>        <span class="s">&quot;change&quot;</span><span class="p">,</span>
    <span class="p">].</span><span class="nx">join</span> <span class="s">&quot; &quot;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Both unregister events from the dummy and from the focus provider.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">unregisterFromDummyEvents</span><span class="o">:-&gt;</span>
        <span class="py">@focusProvider</span><span class="p">.</span><span class="nx">unbind</span> <span class="py">@focusRelatedEvents</span>
        <span class="py">@super</span> <span class="s">&quot;unregisterFromDummyEvents&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Releasing the mouse over the widget gives it the focus.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">mouseup</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">-&gt;</span>
        <span class="k">unless</span> <span class="py">@get</span> <span class="s">&quot;disabled&quot;</span> <span class="k">then</span> <span class="py">@grabFocus</span><span class="p">()</span>
        <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p><a name="HasChild"></a></p>

<h1>HasChild</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Allow a widget to have widgets as children.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">HasChild</span><span class="o">=</span>
    <span class="py">constructorHook</span><span class="o">:-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Children widgets are stored in an array in the
<code>children</code> property.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="py">@children</span> <span class="o">=</span> <span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <h3>Children management</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Use the <code>add</code> method to add child to this container.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">add</span><span class="o">:</span><span class="p">(</span> <span class="nx">child</span> <span class="p">)</span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Only widgets that are not already a child are allowed.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">child</span><span class="o">?</span> <span class="o">and</span> <span class="nx">child</span><span class="p">.</span><span class="nx">isWidget</span> <span class="o">and</span> <span class="nx">child</span> <span class="o">not</span> <span class="k">in</span> <span class="py">@children</span>
            <span class="py">@children</span><span class="p">.</span><span class="nx">push</span> <span class="nx">child</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>When a child widget is added to a <code>container</code>,
its dummy is appended to the container's dummy.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">child</span><span class="p">.</span><span class="nx">attach</span> <span class="py">@dummy</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Widgets can acces their parent through the <code>parent</code> property.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nv">child.parent </span><span class="o">=</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Use the <code>remove</code> method to remove a child from this container.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">remove</span><span class="o">:</span><span class="p">(</span> <span class="nx">child</span> <span class="p">)</span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Only widgets that are already a children of this container
can be removed.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">child</span><span class="o">?</span> <span class="o">and</span> <span class="nx">child</span> <span class="k">in</span> <span class="py">@children</span>
            <span class="py">@children</span><span class="p">.</span><span class="nx">splice</span> <span class="py">@children</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">child</span> <span class="p">),</span> <span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>The child's dummy is then detached from the container's dummy.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">child</span><span class="p">.</span><span class="nx">detach</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>The children no longer hold a reference to its previous
parent at the end of the call.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nv">child.parent </span><span class="o">=</span> <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>The dummy for a <code>Container</code> is a single <code>span</code> with
a <code>container</code> class on it.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">createDummy</span><span class="o">:-&gt;</span>
        <span class="nx">$</span> <span class="s">&quot;&lt;span class=&#39;container&#39;&gt;&lt;/span&gt;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Focus on the widget is prevented if the focus target
is one of its children.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="py">focus</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">-&gt;</span>
        <span class="k">if</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">is</span> <span class="py">@dummy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="py">@super</span> <span class="s">&quot;focus&quot;</span><span class="p">,</span> <span class="nx">e</span>


<span class="py">@HasChild</span>             <span class="o">=</span> <span class="nx">HasChild</span>
<span class="py">@ValueInRange</span>         <span class="o">=</span> <span class="nx">ValueInRange</span>
<span class="py">@FocusProvidedByChild</span> <span class="o">=</span> <span class="nx">FocusProvidedByChild</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 